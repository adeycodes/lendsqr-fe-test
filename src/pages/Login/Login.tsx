import React, { useState } from 'react';
import { useNavigate } from 'react-router-dom';
import { saveAuth } from '../../services/storage';
import '../../styles/components/_login.scss';

// SVG Logo as component
const LendsqrLogo = () => (
  <svg width="145" height="30" viewBox="0 0 145 30" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M2.69055 22.5H0V4.01562H2.69055V22.5Z" fill="#213F7D"/>
    <path d="M13.9539 22.8047C12.5664 22.8047 11.3242 22.5 10.2266 21.8906C9.13672 21.2734 8.28125 20.3984 7.66016 19.2656C7.03906 18.125 6.72852 16.7812 6.72852 15.2344C6.72852 13.6797 7.04297 12.332 7.67188 11.1914C8.30859 10.0508 9.17578 9.17188 10.2734 8.55469C11.3711 7.9375 12.6133 7.62891 14 7.62891C15.3867 7.62891 16.6289 7.9375 17.7266 8.55469C18.8242 9.17188 19.6875 10.0508 20.3164 11.1914C20.9531 12.332 21.2715 13.6797 21.2715 15.2344C21.2715 16.7891 20.9492 18.1367 20.3047 19.2773C19.6602 20.418 18.7852 21.293 17.6797 21.9023C16.5742 22.5039 15.332 22.8047 13.9539 22.8047ZM13.9539 20.4844C14.8711 20.4844 15.6992 20.2695 16.4375 19.8398C17.1836 19.4102 17.7695 18.7773 18.1953 17.9414C18.6289 17.1055 18.8457 16.1055 18.8457 14.9414V15.5273C18.8457 14.3633 18.6289 13.3633 18.1953 12.5273C17.7695 11.6914 17.1836 11.0586 16.4375 10.6289C15.6992 10.1992 14.8711 9.98438 13.9539 9.98438C13.0367 9.98438 12.2086 10.1992 11.4688 10.6289C10.7305 11.0586 10.1445 11.6914 9.71094 12.5273C9.28516 13.3633 9.07227 14.3633 9.07227 15.5273V14.9414C9.07227 16.1055 9.28516 17.1055 9.71094 17.9414C10.1445 18.7773 10.7305 19.4102 11.4688 19.8398C12.2086 20.2695 13.0367 20.4844 13.9539 20.4844Z" fill="#213F7D"/>
    <path d="M32.875 22.5L29.3594 17.3203L26.0234 22.5H23.0625L28.0234 15.0586L23.2617 7.92969H26.2227L29.5586 12.8906L32.7695 7.92969H35.6367L30.8164 14.9414L35.8594 22.5H32.875Z" fill="#213F7D"/>
    <path d="M58.5 22.5H55.8094V4.01562H58.5V22.5Z" fill="#39CDCC"/>
    <path d="M69.4586 22.8047C68.0711 22.8047 66.8289 22.5 65.7312 21.8906C64.6414 21.2734 63.7859 20.3984 63.1648 19.2656C62.5437 18.125 62.2332 16.7812 62.2332 15.2344C62.2332 13.6797 62.5477 12.332 63.1766 11.1914C63.8133 10.0508 64.6805 9.17188 65.7781 8.55469C66.8758 7.9375 68.118 7.62891 69.5047 7.62891C70.8914 7.62891 72.1336 7.9375 73.2312 8.55469C74.3289 9.17188 75.1922 10.0508 75.8211 11.1914C76.4578 12.332 76.7762 13.6797 76.7762 15.2344C76.7762 16.7891 76.4539 18.1367 75.8094 19.2773C75.1648 20.418 74.2898 21.293 73.1844 21.9023C72.0789 22.5039 70.8367 22.8047 69.4586 22.8047ZM69.4586 20.4844C70.3758 20.4844 71.2039 20.2695 71.9422 19.8398C72.6883 19.4102 73.2742 18.7773 73.7 17.9414C74.1336 17.1055 74.3504 16.1055 74.3504 14.9414V15.5273C74.3504 14.3633 74.1336 13.3633 73.7 12.5273C73.2742 11.6914 72.6883 11.0586 71.9422 10.6289C71.2039 10.1992 70.3758 9.98438 69.4586 9.98438C68.5414 9.98438 67.7133 10.1992 66.9734 10.6289C66.2352 11.0586 65.6492 11.6914 65.2156 12.5273C64.7898 13.3633 64.577 14.3633 64.577 15.5273V14.9414C64.577 16.1055 64.7898 17.1055 65.2156 17.9414C65.6492 18.7773 66.2352 19.4102 66.9734 19.8398C67.7133 20.2695 68.5414 20.4844 69.4586 20.4844Z" fill="#39CDCC"/>
    <path d="M88.3797 22.5L84.8641 17.3203L81.5281 22.5H78.5672L83.5281 15.0586L78.7664 7.92969H81.7273L85.0633 12.8906L88.2742 7.92969H91.1414L86.3211 14.9414L91.3641 22.5H88.3797Z" fill="#39CDCC"/>
    <path d="M37.4844 7.92969H40.1289V12.5039C40.6289 11.1797 41.4102 10.1328 42.4727 9.36328C43.543 8.58594 44.7617 8.17188 46.1289 8.12109V10.6875H45.5781C44.0547 10.6875 42.7695 11.1953 41.7227 12.2109C40.6758 13.2266 40.1523 14.7266 40.1523 16.7109V22.5H37.4844V7.92969Z" fill="#213F7D"/>
    <path d="M93.6641 7.92969H96.3086V12.5039C96.8086 11.1797 97.5898 10.1328 98.6523 9.36328C99.7227 8.58594 100.941 8.17188 102.309 8.12109V10.6875H101.758C100.234 10.6875 98.9492 11.1953 97.9023 12.2109C96.8555 13.2266 96.332 14.7266 96.332 16.7109V22.5H93.6641V7.92969Z" fill="#39CDCC"/>
    <path d="M47.4258 22.5V7.92969H50.0703V22.5H47.4258ZM48.7598 5.64844C48.2441 5.64844 47.8105 5.46094 47.459 5.08594C47.1074 4.70312 46.9316 4.25 46.9316 3.72656C46.9316 3.20312 47.1074 2.75391 47.459 2.37891C47.8105 2.00391 48.2441 1.81641 48.7598 1.81641C49.2832 1.81641 49.7207 2.00391 50.0723 2.37891C50.4316 2.75391 50.6113 3.20312 50.6113 3.72656C50.6113 4.25 50.4316 4.70312 50.0723 5.08594C49.7207 5.46094 49.2832 5.64844 48.7598 5.64844Z" fill="#213F7D"/>
    <path d="M103.605 22.5V7.92969H106.25V22.5H103.605ZM104.939 5.64844C104.424 5.64844 103.99 5.46094 103.639 5.08594C103.287 4.70312 103.111 4.25 103.111 3.72656C103.111 3.20312 103.287 2.75391 103.639 2.37891C103.99 2.00391 104.424 1.81641 104.939 1.81641C105.463 1.81641 105.9 2.00391 106.252 2.37891C106.611 2.75391 106.791 3.20312 106.791 3.72656C106.791 4.25 106.611 4.70312 106.252 5.08594C105.9 5.46094 105.463 5.64844 104.939 5.64844Z" fill="#39CDCC"/>
    <path d="M52.5625 22.5V7.92969H55.207V10.6523C55.6992 9.69531 56.4297 8.93359 57.3984 8.36719C58.375 7.79297 59.5156 7.50586 60.8203 7.50586C62.4609 7.50586 63.7852 7.99219 64.793 8.96484C65.8086 9.92969 66.3164 11.3516 66.3164 13.2305V22.5H63.6484V13.6992C63.6484 12.4102 63.3379 11.4375 62.7168 10.7812C62.0957 10.125 61.2324 9.79688 60.127 9.79688C58.8535 9.79688 57.8262 10.2148 57.0449 11.0508C56.2637 11.8867 55.873 13.0273 55.873 14.4727V22.5H52.5625Z" fill="#213F7D"/>
    <path d="M108.742 22.5V7.92969H111.387V10.6523C111.879 9.69531 112.609 8.93359 113.578 8.36719C114.555 7.79297 115.695 7.50586 117 7.50586C118.641 7.50586 119.965 7.99219 120.973 8.96484C121.988 9.92969 122.496 11.3516 122.496 13.2305V22.5H119.828V13.6992C119.828 12.4102 119.518 11.4375 118.896 10.7812C118.275 10.125 117.412 9.79688 116.307 9.79688C115.033 9.79688 114.006 10.2148 113.225 11.0508C112.443 11.8867 112.053 13.0273 112.053 14.4727V22.5H108.742Z" fill="#39CDCC"/>
    <path d="M129.039 22.8047C127.652 22.8047 126.41 22.5 125.312 21.8906C124.223 21.2734 123.367 20.3984 122.746 19.2656C122.125 18.125 121.814 16.7812 121.814 15.2344C121.814 13.6797 122.129 12.332 122.758 11.1914C123.395 10.0508 124.262 9.17188 125.359 8.55469C126.457 7.9375 127.699 7.62891 129.086 7.62891C130.473 7.62891 131.715 7.9375 132.812 8.55469C133.91 9.17188 134.773 10.0508 135.402 11.1914C136.039 12.332 136.357 13.6797 136.357 15.2344C136.357 16.7891 136.035 18.1367 135.391 19.2773C134.746 20.418 133.871 21.293 132.766 21.9023C131.66 22.5039 130.418 22.8047 129.039 22.8047ZM129.039 20.4844C129.957 20.4844 130.785 20.2695 131.523 19.8398C132.27 19.4102 132.855 18.7773 133.281 17.9414C133.715 17.1055 133.932 16.1055 133.932 14.9414V15.5273C133.932 14.3633 133.715 13.3633 133.281 12.5273C132.855 11.6914 132.27 11.0586 131.523 10.6289C130.785 10.1992 129.957 9.98438 129.039 9.98438C128.122 9.98438 127.294 10.1992 126.555 10.6289C125.816 11.0586 125.23 11.6914 124.797 12.5273C124.371 13.3633 124.158 14.3633 124.158 15.5273V14.9414C124.158 16.1055 124.371 17.1055 124.797 17.9414C125.23 18.7773 125.816 19.4102 126.555 19.8398C127.294 20.2695 128.122 20.4844 129.039 20.4844Z" fill="#39CDCC"/>
    <path d="M145 22.5H142.332V7.92969H145V22.5ZM145 5.64844V22.5H142.332V5.64844H145Z" fill="#39CDCC"/>
  </svg>
);

// Login Illustration
const LoginIllustration = () => (
  <svg width="600" height="337" viewBox="0 0 600 337" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect width="600" height="337" fill="#F5F5F5"/>
    <text x="300" y="168" textAnchor="middle" fill="#39CDCC" fontSize="24" fontFamily="Work Sans">
      Login Illustration
    </text>
  </svg>
);

const Login: React.FC = () => {
  const navigate = useNavigate();
  const [formData, setFormData] = useState({ email: '', password: '' });
  const [showPassword, setShowPassword] = useState(false);
  const [errors, setErrors] = useState<{ email?: string; password?: string }>({});
  const [isLoading, setIsLoading] = useState(false);

  const validateEmail = (email: string): boolean => {
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    return emailRegex.test(email);
  };

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    const newErrors: { email?: string; password?: string } = {};

    if (!formData.email) {
      newErrors.email = 'Email is required';
    } else if (!validateEmail(formData.email)) {
      newErrors.email = 'Please enter a valid email';
    }

    if (!formData.password) {
      newErrors.password = 'Password is required';
    }

    if (Object.keys(newErrors).length > 0) {
      setErrors(newErrors);
      return;
    }

    setIsLoading(true);
    setErrors({});

    // Simulate login delay
    await new Promise((resolve) => setTimeout(resolve, 800));
    
    saveAuth(true);
    navigate('/users');
    setIsLoading(false);
  };

  return (
    <div className="login-container">
      <div className="login-left">
        <div className="logo">
          <LendsqrLogo />
        </div>
        <div className="illustration">
          <LoginIllustration />
        </div>
      </div>
      
      <div className="login-right">
        <form className="login-form" onSubmit={handleSubmit}>
          <div className="mobile-logo">
            <LendsqrLogo />
          </div>
          
          <h1>Welcome!</h1>
          <p className="subtitle">Enter details to login.</p>
          
          <div className={`input-group ${errors.email ? 'input-error' : ''}`}>
            <input
              type="text"
              placeholder="Email"
              value={formData.email}
              onChange={(e) => setFormData({ ...formData, email: e.target.value })}
            />
            {errors.email && <p className="error-message">{errors.email}</p>}
          </div>
          
          <div className={`password-group ${errors.password ? 'input-error' : ''}`}>
            <input
              type={showPassword ? 'text' : 'password'}
              placeholder="Password"
              value={formData.password}
              onChange={(e) => setFormData({ ...formData, password: e.target.value })}
            />
            <button
              type="button"
              className="show-password"
              onClick={() => setShowPassword(!showPassword)}
            >
              {showPassword ? 'Hide' : 'Show'}
            </button>
            {errors.password && <p className="error-message">{errors.password}</p>}
          </div>
          
          <a href="#" className="forgot-password">
            Forgot Password?
          </a>
          
          <button type="submit" className="login-button" disabled={isLoading}>
            {isLoading ? 'Logging in...' : 'Log In'}
          </button>
        </form>
      </div>
    </div>
  );
};

export default Login;
